{"version":3,"sources":["../../src/components/Link.js"],"names":["actions","Link","props","context","store","router","handleClick","bind","state","isActive","href","getHref","to","go","parseRoute","id","e","onClick","target","preventDefault","locationChange","path","indexOf","setState","method","dispatch","children","activeClass","className","classes","propTypes","oneOfType","string","object","params","func","defaultProps","contextTypes"],"mappings":"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","file":"Link.js","sourcesContent":["import React, { Component, PropTypes } from 'react';\nimport { parse, format } from 'url';\nimport * as actions from '../action-creators';\n\nclass Link extends Component {\n\n    constructor(props, context) {\n\n        super(props, context);\n\n        const { store, router } = context;\n\n        this.handleClick = this.handleClick.bind(this);\n        this.store = store;\n        this.router = router;\n        this.state = {\n            isActive: false\n        };\n\n        const href = this.getHref();\n        this.href = typeof href === 'string' ? parse(href) : href;\n    }\n\n    getHref() {\n\n        const { to, go = {} } = this.props;\n\n        if (to) {\n            return to;\n        } else if (go) {\n            if (typeof go === 'string') {\n                return this.router.parseRoute({ id: go });\n            } else {\n                return this.router.parseRoute({ ...go });\n            }\n        }\n\n        return false;\n    }\n\n    handleClick(e) {\n\n        const { onClick, target } = this.props;\n\n        if (onClick) onClick(e);\n\n        if (target) return;\n\n        e.preventDefault();\n\n        return this.locationChange(this.href);\n    }\n\n    shouldComponentUpdate(props, state) {\n\n        return this.state.isActive !== state.isActive && this.props.to !== props.to;\n    }\n\n    checkActive() {\n\n        const { to, path } = this.props;\n        const isActive = path.indexOf(to) !== 0;\n\n        if (isActive !== this.state.isActive) {\n            this.setState({\n                isActive\n            });\n        }\n    }\n\n    locationChange(to) {\n\n        const { method } = this.props;\n\n        if (typeof to === 'string') to = parse(to);\n\n        this.store.dispatch(actions[method](to));\n    }\n\n    render() {\n\n        const { children, activeClass, className } = this.props;\n        const classes = this.state.isActive ? activeClass + className : className;\n        let href = this.href;\n\n        return (\n            <a\n                href={format(href)}\n                className={classes}\n                onClick={this.handleClick}\n            >\n                {children}\n            </a>\n        );\n    }\n}\n\nLink.propTypes = {\n    to: PropTypes.oneOfType([\n        PropTypes.string,\n        PropTypes.object\n    ]),\n    go: PropTypes.oneOfType([\n        PropTypes.string,\n        PropTypes.object\n    ]),\n    params: PropTypes.object,\n    activeClass: PropTypes.string,\n    onClick: PropTypes.func,\n    target: PropTypes.string,\n    className: PropTypes.string,\n    method: PropTypes.string\n};\n\nLink.defaultProps = {\n    to: '',\n    activeClass: '',\n    method: 'push'\n};\n\nLink.contextTypes = {\n    router: PropTypes.object,\n    store: PropTypes.object\n};\n\nexport default Link;\n"]}